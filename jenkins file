def COLOR_MAP = ['SUCCESS': 'good', 'FAILURE': 'danger', 'UNSTABLE': 'danger', 'ABORTED': 'danger']
//def icons = ['SUCCESS' : 'man_dancing' , 'FAILURE' : 'ghost']
def icons = [":unicorn_face:",  ":man_dancing:", ":party_parrot:",  ":dancer:"]
def icons1 = [":Thermometer:", ":Bomb:"]
def randomIndex = (new Random()).nextInt(icons.size())
def randomIndex1 = (new Random()).nextInt(icons1.size())
pipeline {
   agent  { label ' Android_Slave' }
    options { skipDefaultCheckout() }
	environment { 
        branch = 'master' 
        credentialsId = 'dd'     // credential of jenkins 
        scmUrl = 'https://github.com/Dileep1314/new-gradle.git'
    } 
    stages {
        stage ('Build Stage') {
            agent none
            steps {
                script {
                    stage ('Checkout') {
                        echo 'THIS IS FOR CLONEING'
                        git branch: branch, credentialsId: credentialsId, url: scmUrl
                    }
                    stage ('BUILD') {
					    sh 'task incrementBetaVersion {
   doLast {
task dileep << {
   String expString = 'ANANTHA dileep'
   println "Original: " + expString
   println "Upper case: " + expString.toUpperCase()
  }
 }
} '
                        
                    }
				}
			}
		}
    }

post {
        success {
            slackSend channel: '#testin123',
            teamDomain: 'ibm-appops',
            token: "DqzedffuiSvvxBd1xiDOXuiC",
            color: COLOR_MAP[currentBuild.currentResult],
            message: "Jenkins build is success for ${JOB_NAME}- check the output log  <${env.BUILD_URL}|here>"
            //message: "${icons[randomIndex]} *${currentBuild.currentResult}:* Job ${JOB_NAME} build ${BUILD_NUMBER} \n More info at: ${BUILD_URL}"
        }
        failure {
            slackSend channel: '#testing123',
            teamDomain: 'ibm-appops',
            token: "DqzedffuiSvvxBd1xiDOXuiC",
            color: COLOR_MAP[currentBuild.currentResult],
            message: "${icons1[randomIndex1]} *${currentBuild.currentResult}:* \n More info at: ${BUILD_URL}"
        }
 }
 }
